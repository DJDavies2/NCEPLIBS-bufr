<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-bufr: mesgbc.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NCEPLIBS-bufr<span id="projectnumber">&#160;11.7.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('mesgbc_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle"><div class="title">mesgbc.f File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="mesgbc_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a7c19b0b932b32b59a6bf5f3c8a809617"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mesgbc_8f.html#a7c19b0b932b32b59a6bf5f3c8a809617">mesgbc</a> (LUNIN, MESGTYP, ICOMP)</td></tr>
<tr class="memdesc:a7c19b0b932b32b59a6bf5f3c8a809617"><td class="mdescLeft">&#160;</td><td class="mdescRight">THIS SUBROUTINE EXAMINES A BUFR MESSAGE AND RETURNS BOTH THE MESSAGE TYPE FROM SECTION 1 AND A MESSAGE COMPRESSION INDICATOR UNPACKED FROM SECTION 3.  <a href="mesgbc_8f.html#a7c19b0b932b32b59a6bf5f3c8a809617">More...</a><br /></td></tr>
<tr class="separator:a7c19b0b932b32b59a6bf5f3c8a809617"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>KEYSER </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2003-11-04 </dd></dl>

<p class="definition">Definition in file <a class="el" href="mesgbc_8f_source.html">mesgbc.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a7c19b0b932b32b59a6bf5f3c8a809617" name="a7c19b0b932b32b59a6bf5f3c8a809617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c19b0b932b32b59a6bf5f3c8a809617">&#9670;&nbsp;</a></span>mesgbc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine mesgbc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LUNIN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>MESGTYP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ICOMP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>THIS SUBROUTINE EXAMINES A BUFR MESSAGE AND RETURNS BOTH THE MESSAGE TYPE FROM SECTION 1 AND A MESSAGE COMPRESSION INDICATOR UNPACKED FROM SECTION 3. </p>
<p >IT OBTAINS THE BUFR MESSAGE VIA TWO DIFFERENT METHODS, BASED UPON THE SIGN OF LUNIN. IF LUNIN IS GREATER THAN ZERO, THIS SUBROUTINE READS AND EXAMINES SECTION 1 OF MESSAGES IN A BUFR FILE IN SEQUENCE UNTIL IT FINDS THE FIRST MESSAGE THAT ACTUALLY CONTAINS REPORT DATA {I.E., BEYOND THE BUFR TABLE (DICTIONARY) MESSAGES AT THE TOP AND, FOR DUMP FILES, BEYOND THE TWO DUMMY MESSAGES CONTAINING THE CENTER TIME AND THE DUMP TIME}. IT THEN RETURNS THE MESSAGE TYPE AND COMPRESSION INDICATOR FOR THIS FIRST DATA MESSAGE. IN THIS CASE, THE BUFR FILE SHOULD NOT BE OPENED VIA BUFR ARCHIVE LIBRARY SUBROUTINE OPENBF PRIOR TO CALLING THIS SUBROUTINE. HOWEVER, THE BUFR FILE MUST BE CONNECTED TO UNIT ABS(LUNIN). WHEN USED THIS WAY, THIS SUBROUTINE IS IDENTICAL TO BUFR ARCHIVE LIBRARY SUBROUTINE MESGBF EXCEPT MESGBF DOES NOT RETURN ANY INFORMATION ABOUT COMPRESSION AND MESGBF READS UNTIL IT FINDS THE FIRST NON-DICTIONARY MESSAGE REGARDLESS OF WHETHER OR NOT IT CONTAINS ANY REPORTS (I.E., IT WOULD STOP AT THE DUMMY MESSAGE CONTAINING THE CENTER TIME FOR DUMP FILES). THE SECOND METHOD IN WHICH THIS SUBROUTINE CAN BE USED OCCURS WHEN LUNIN IS PASSED IN WITH A VALUE LESS THAN ZERO. IN THIS CASE, IT SIMPLY RETURNS THE MESSAGE TYPE AND COMPRESSION INDICATOR FOR THE BUFR MESSAGE CURRENTLY STORED IN THE INTERNAL MESSAGE BUFFER (ARRAY MBAY IN MODULE BITBUF). IN THIS CASE, THE BUFR FILE CONNECTED TO ABS(LUNIN) MUST HAVE BEEN PREVIOUSLY OPENED FOR INPUT OPERATIONS BY BUFR ARCHIVE LIBRARY SUBROUTINE OPENBF, AND THE BUFR MESSAGE MUST HAVE BEEN READ INTO MEMORY BY BUFR ARCHIVE LIBRARY ROUTINE READMG OR EQUIVALENT.</p>
<p >PROGRAM HISTORY LOG: 2003-11-04 D. KEYSER &ndash; ORIGINAL AUTHOR 2004-06-29 D. KEYSER &ndash; ADDED NEW OPTION TO RETURN MESSAGE TYPE AND COMPRESSION INDICATOR FOR BUFR MESSAGE CURRENTLY STORED IN MEMORY (TRIGGERED BY INPUT ARGUMENT LUNIN LESS THAN ZERO) 2004-08-09 J. ATOR &ndash; MAXIMUM MESSAGE LENGTH INCREASED FROM 20,000 TO 50,000 BYTES 2005-11-29 J. ATOR &ndash; USE IUPBS01, GETLENS AND RDMSGW 2009-03-23 J. ATOR &ndash; USE IUPBS3 AND IDXMSG 2012-09-15 J. WOOLLEN &ndash; CONVERT TO C LANGUAGE I/O INTERFACE ADD OPENBF AND CLOSBF FOR THE CASE WHEN LUNIN GT 0 2014-12-10 J. ATOR &ndash; USE MODULES INSTEAD OF COMMON BLOCKS</p>
<p >USAGE: CALL MESGBC (LUNIN, MESGTYP, ICOMP) INPUT ARGUMENT LIST: LUNIN - INTEGER: ABSOLUTE VALUE IS FORTRAN LOGICAL UNIT NUMBER FOR BUFR FILE</p><ul>
<li>IF LUNIN IS GREATER THAN ZERO, THIS SUBROUTINE READS THROUGH ALL BUFR MESSAGES FROM BEGINNING OF FILE UNTIL IT FINDS THE FIRST MESSAGE CONTAINING REPORT DATA</li>
<li>IF LUNIN IS LESS THAN ZERO, THIS SUBROUTINE OPERATES ON THE BUFR MESSAGE CURRENTLY STORED IN MEMORY</li>
</ul>
<p >OUTPUT ARGUMENT LIST: MESGTYP - INTEGER: BUFR MESSAGE TYPE FOR EITHER THE FIRST MESSAGE IN FILE CONTAINING REPORT DATA (IF LUNIN &gt; 0), OR FOR THE MESSAGE CURRENTLY IN MEMORY (IF LUNIN &lt; 0) -256 = for LUNIN &gt; 0 case only: no messages read or error reading file &lt; 0 = for LUNIN &gt; 0 case only: none of the messages read contain reports; this is the negative of the message type the last message read (i.e., -11 indicates the BUFR file contains only BUFR table messages) ICOMP - INTEGER: BUFR MESSAGE COMPRESSION SWITCH: -3 = for LUNIN &gt; 0 case only: BUFR file does not exist -2 = for LUNIN &gt; 0 case only: BUFR file does not contain any report messages -1 = for LUNIN &gt; 0 case only: cannot determine if first BUFR message containing report data is compressed due to error reading file 0 = BUFR message (either first containing report data if LUNIN &gt; 0, or that currently in memory if LUNIN &lt; 0) is NOT compressed 1 = BUFR message (either first containing report data if LUNIN &gt; 0, or that currently in memory if LUNIN &lt; 0) IS compressed</p>
<p >INPUT FILES: UNIT ABS(LUNIN) - BUFR FILE</p>
<p >REMARKS: THIS ROUTINE CALLS: CLOSBF IDXMSG IUPBS01 IUPBS3 OPENBF RDMSGW STATUS THIS ROUTINE IS CALLED BY: COPYSB UFBTAB Also called by application programs. </p>

<p class="definition">Definition at line <a class="el" href="mesgbc_8f_source.html#l00096">96</a> of file <a class="el" href="mesgbc_8f_source.html">mesgbc.f</a>.</p>

<p class="reference">References <a class="el" href="closbf_8f.html#a00c94986037d2cf27d04de7a1f8a3ebc">closbf()</a>, <a class="el" href="idxmsg_8f.html#ab9276526fbe1b76bfa9f3d15f734c2b2">idxmsg()</a>, <a class="el" href="iupbs01_8f.html#adcd6f7c2f898b4f938153c5cf79a9cf5">iupbs01()</a>, <a class="el" href="iupbs3_8f.html#a542e11287f9dc5bf72d3889db48e1b19">iupbs3()</a>, <a class="el" href="namespacemoda__bitbuf.html#a983cdfefb8e99f7ede13ce9f979bea3e">moda_bitbuf::mbay</a>, <a class="el" href="openbf_8f.html#a9bea9aeada166bd9037b959ca8452b28">openbf()</a>, <a class="el" href="rdmsgw_8f.html#aa1d21de28344723fc4848ec1cd14b094">rdmsgw()</a>, and <a class="el" href="status_8f.html#a22292e7a69c411a961168198d259f336">status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="copysb_8f.html#a069b655003f8b71b2f29aa5d9f451a33">copysb()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_30c37837910170b6dae887e9df3b66a9.html">nceplibs-bufr</a></li><li class="navelem"><a class="el" href="dir_e81fc8df062d10d5f2b231f7e4ab81b8.html">src</a></li><li class="navelem"><a class="el" href="mesgbc_8f.html">mesgbc.f</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
