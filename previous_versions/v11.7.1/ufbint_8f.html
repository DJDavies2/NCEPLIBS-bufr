<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-bufr: ufbint.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NCEPLIBS-bufr<span id="projectnumber">&#160;11.7.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ufbint_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle"><div class="title">ufbint.f File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Read/write one or more data values from/to a data subset.  
<a href="#details">More...</a></p>

<p><a href="ufbint_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:afe3364a491b49e0c9e5a526b009aaa75"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ufbint_8f.html#afe3364a491b49e0c9e5a526b009aaa75">ufbint</a> (LUNIN, USR, I1, I2, IRET, STR)</td></tr>
<tr class="memdesc:afe3364a491b49e0c9e5a526b009aaa75"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine reads or writes one or more data values from or to the BUFR data subset that is currently open within the BUFRLIB internal arrays.  <a href="ufbint_8f.html#afe3364a491b49e0c9e5a526b009aaa75">More...</a><br /></td></tr>
<tr class="separator:afe3364a491b49e0c9e5a526b009aaa75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Read/write one or more data values from/to a data subset. </p>

<p class="definition">Definition in file <a class="el" href="ufbint_8f_source.html">ufbint.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="afe3364a491b49e0c9e5a526b009aaa75" name="afe3364a491b49e0c9e5a526b009aaa75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3364a491b49e0c9e5a526b009aaa75">&#9670;&nbsp;</a></span>ufbint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine ufbint </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LUNIN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real*8, dimension(i1,i2)&#160;</td>
          <td class="paramname"><em>USR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>I1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>I2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IRET</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character*(*)&#160;</td>
          <td class="paramname"><em>STR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine reads or writes one or more data values from or to the BUFR data subset that is currently open within the BUFRLIB internal arrays. </p>
<p >The direction of the data transfer is determined by the context of ABS(LUNIN):</p><ul>
<li>If ABS(LUNIN) points to a file that was previously opened for input using subroutine <a class="el" href="openbf_8f.html#a9bea9aeada166bd9037b959ca8452b28" title="This subroutine connects a new file to the BUFRLIB software for input or output operations.">openbf()</a>, then data values are read from the current data subset.</li>
<li>If ABS(LUNIN) points to a file that was previously opened for output using subroutine <a class="el" href="openbf_8f.html#a9bea9aeada166bd9037b959ca8452b28" title="This subroutine connects a new file to the BUFRLIB software for input or output operations.">openbf()</a>, then data values are written to the current data subset.</li>
</ul>
<p >This subroutine is specifically designed for use with Table B mnemonics which are part of a delayed-replication sequence, or for which there is no replication at all. See also subroutines <a class="el" href="ufbrep_8f.html#adb981832bdbbb26903265fb946aac58c" title="This subroutine reads or writes one or more data values from or to the BUFR data subset that is curre...">ufbrep()</a>, <a class="el" href="ufbseq_8f.html#aa96ada82e0e2f98226594f3532bb245d" title="This subroutine reads or writes an entire sequence of data values from or to the BUFR data subset tha...">ufbseq()</a> and <a class="el" href="ufbstp_8f.html#a8153bb675bd7b02b4a2a58b77ba9d581" title="This subroutine reads or writes one or more data values from or to the BUFR data subset that is curre...">ufbstp()</a>, which can also be used to read/write one or more data values from/to a data subset but are designed for different use cases. A more detailed discussion of these different use cases, including examples, is available in <a class="el" href="md__home_jeffa_nceplibs_bufr_docs_dfbftab.html#ufbsubs">DX BUFR Tables</a>.</p>
<dl class="section author"><dt>Author</dt><dd>J. Woollen </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-01-06</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIN</td><td>&ndash; integer: Absolute value is Fortran logical unit number for BUFR file </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">USR</td><td>&ndash; real*8(*,*): Data values<ul>
<li>If ABS(LUNIN) was opened for input, then USR is output from this subroutine and contains data values that were read from the current data subset.</li>
<li>If ABS(LUNIN) was opened for output, then USR is input to this subroutine and contains data values that are to be written to the current data subset. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">I1</td><td>&ndash; integer: Actual first dimension of USR as allocated within the calling program </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">I2</td><td>&ndash; integer:<ul>
<li>If ABS(LUNIN) was opened for input, then I2 must be set equal to the actual second dimension of USR as allocated within the calling program</li>
<li>If ABS(LUNIN) was opened for output, then I2 must be set equal to the number of replications of STR that are to be written to the data subset </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">IRET</td><td>&ndash; integer: Number of replications of STR that were actually read/written from/to the data subset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">STR</td><td>&ndash; character*(*): String of blank-separated Table B mnemonics in one-to-one correspondence with the number of data values that will be read/written from/to the data subset within the first dimension of USR (see <a class="el" href="md__home_jeffa_nceplibs_bufr_docs_dfbftab.html#dfbftab">DX BUFR Tables</a> for further information about Table B mnemonics)</td></tr>
  </table>
  </dd>
</dl>
<p >It is the user's responsibility to ensure that USR is dimensioned sufficiently large enough to accommodate the number of data values that are to be read from or written to the data subset. Note also that USR is an array of real*8 values; therefore, any data that are to be written out as character (i.e. CCITT IA5) values in BUFR must be converted from character into real*8 format within the application program before calling this subroutine. Conversely, when this subroutine is being used to read character values from a data subset, the value that is returned will be in real*8 format and must be converted back into character format by the application program before it can be used as such. Alternatively, there are different subroutines such as <a class="el" href="readlc_8f.html#acf408b0943fc7a5040009cd9a9bc57a1" title="This subroutine reads a long character string (greater than 8 bytes) from a data subset.">readlc()</a> and <a class="el" href="writlc_8f.html#a7017d5359bb32ce5407499d7a1b16709" title="This subroutine writes a long character string (greater than 8 bytes) to a data subset.">writlc()</a> which can be used to read/write character data directly from/to a data subset without the need to convert from/to real*8 format as an intermediate step.</p>
<p >Numeric (i.e. non-character) data values within USR are always in the exact units specified for the corresponding mnemonic within the relevant DX or master BUFR table, without any scale or reference values applied. Specifically, this means that, when writing data values into an output subset, the user only needs to store each respective value into USR using the units specified within the table, and the BUFRLIB software will take care of any necessary scaling or referencing of the value before it is actually encoded into BUFR. Conversely, when reading data values from an input subset, the values returned in USR are already de-scaled and de-referenced and, thus, are already in the exact units that were defined for the corresponding mnemonics within the table.</p>
<p >"Missing" values in USR are always denoted by a unique placeholder value. This placeholder value is initially set to a default value of 10E10_8, but it can be reset to any substitute value of the user's choice via a separate call to subroutine <a class="el" href="setbmiss_8f.html#a5435d5821267af076f83cefdf3c1c7f8" title="This subroutine allows the user to specify a customized value to represent &quot;missing&quot; data when readin...">setbmiss()</a>. In any case, and whenever this subroutine is used to read data values from an input subset, any returned value in USR can be easily checked for equivalence to the current placeholder value via a call to function <a class="el" href="ibfms_8f.html#a0f7ba3ed6f17e76d912b4f13ea70967e" title="This function provides a handy way to check whether a real*8 data value returned from a previous call...">ibfms()</a>, and a positive result means that the value for the corresponding mnemonic was encoded as "missing" in BUFR (i.e. all bits set to 1) within the original data subset. Conversely, whenever this subroutine is used to write data values to an output subset, the current placeholder value can be obtained via a separate call to function <a class="el" href="getbmiss_8f.html#a2e6035695a459284e0592a2452b2f168" title="This function returns the current placeholder value which represents &quot;missing&quot; data when reading from...">getbmiss()</a>, and the resulting value can then be stored into the USR array whereever the user desires a BUFR "missing" value (i.e. all bits set to 1) to be encoded for the corresponding mnemonic within the output subset.</p>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>If LUNIN &lt; 0, and if ABS(LUNIN) points to a file that is open for output (writing BUFR), then the subroutine will treat the file pointed to by ABS(LUNIN) as though it was open for input (reading BUFR). This is a special capability for use by some applications that need to read certain values back out from a BUFR file during the same time that it is in the process of being written to.</li>
<li>If ABS(LUNIN) points to a file that is open for input (reading BUFR), STR may contain a Table D mnemonic that is replicated using either 8-bit or 16-bit delayed replication (as noted using replication indicators {} or (), respectively, within the assocated DX BUFR table), and the corresponding location in USR will contain the total number of replications of that mnemonic within the data subset. Note that, when using this option, the applicable replication indicators must be included in STR along with the mnemonic itself, as shown in an example in the discussion of <a class="el" href="md__home_jeffa_nceplibs_bufr_docs_dfbftab.html#ufbsubs">DX BUFR Tables</a>.</li>
<li>If ABS(LUNIN) points to a file that is open for input (reading BUFR), there are a few additional special mnemonics that can be included within STR when calling this subroutine, and which in turn will result in special information being returned within the corresponding location in USR. These special mnemonics are not considered to be part of Table B or Table D and therefore do not need to be definied within the DX or master table file associated with ABS(LUNIN):<ul>
<li>NUL - returns the "missing" value</li>
<li>IREC - returns the number of the BUFR message within the file pointed to by ABS(LUNIN) (counting from the beginning of the file) in which the current data subset resides</li>
<li>ISUB - returns the number of the current data subset within the BUFR message pointed to by IREC, counting from the beginning of the message</li>
</ul>
</li>
</ul>
</dd></dl>
<p><b>Program history log:</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Programmer   </th><th class="markdownTableHeadNone">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1994-01-06   </td><td class="markdownTableBodyNone">J. Woollen   </td><td class="markdownTableBodyNone">Original author    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1996-11-25   </td><td class="markdownTableBodyNone">J. Woollen   </td><td class="markdownTableBodyNone">Modified to add a return code when mnemonics are not found when reading    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1996-12-17   </td><td class="markdownTableBodyNone">J. Woollen   </td><td class="markdownTableBodyNone">Modified to always initialize USR array to "missing" when BUFR file is being read    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1998-07-08   </td><td class="markdownTableBodyNone">J. Woollen   </td><td class="markdownTableBodyNone">Replaced call to Cray library routine ABORT with call to new internal routine <a class="el" href="bort_8f.html#a488d3a8cf930fb592a9fdaefcfa04ac4" title="This subroutine calls subroutine errwrt() to log an error message, then calls subroutine bort_exit() ...">bort()</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1999-11-18   </td><td class="markdownTableBodyNone">J. Woollen   </td><td class="markdownTableBodyNone">The number of BUFR files which can be opened at one time increased from 10 to 32    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2003-11-04   </td><td class="markdownTableBodyNone">S. Bender   </td><td class="markdownTableBodyNone">Added remarks and routine interdependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2003-11-04   </td><td class="markdownTableBodyNone">D. Keyser   </td><td class="markdownTableBodyNone">Unified/portable for WRF; added documentation; outputs more complete diagnostic info when routine terminates abnormally    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2004-08-18   </td><td class="markdownTableBodyNone">J. Ator   </td><td class="markdownTableBodyNone">Added SAVE for IFIRST1 and IFIRST2 flags    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2009-04-21   </td><td class="markdownTableBodyNone">J. Ator   </td><td class="markdownTableBodyNone">Use <a class="el" href="errwrt_8f.html#a65626d9a772648676146b62b596c2764" title="This subroutine allows the user to specify a custom location for the logging of error and diagnostic ...">errwrt()</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2014-12-10   </td><td class="markdownTableBodyNone">J. Ator   </td><td class="markdownTableBodyNone">Use modules instead of COMMON blocks   </td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ufbint_8f_source.html#l00152">152</a> of file <a class="el" href="ufbint_8f_source.html">ufbint.f</a>.</p>

<p class="reference">References <a class="el" href="namespacemodv__bmiss.html#a4e62f0091102c93beac0252bdd591641">modv_bmiss::bmiss</a>, <a class="el" href="bort_8f.html#a488d3a8cf930fb592a9fdaefcfa04ac4">bort()</a>, <a class="el" href="bort2_8f.html#a50f605cc96a22ffce20206c2d254b9c3">bort2()</a>, <a class="el" href="errwrt_8f.html#a65626d9a772648676146b62b596c2764">errwrt()</a>, <a class="el" href="status_8f.html#a22292e7a69c411a961168198d259f336">status()</a>, <a class="el" href="string_8f.html#ad5386a1e671ead372f1c087994b68438">string()</a>, <a class="el" href="trybump_8f.html#ab8d4eedb2ec08b105c34a04ceb536f47">trybump()</a>, and <a class="el" href="ufbrw_8f.html#abc239f0ea4f858cccb770bad22d04f02">ufbrw()</a>.</p>

<p class="reference">Referenced by <a class="el" href="namespacebufr__c__interface__mod.html#a4ba25e289e99f210b2ae498ac2b11950">bufr_c_interface_mod::ufbint_c()</a>, <a class="el" href="ufbinx_8f.html#ac8a380b1f26c05540ca3993fb2b7be85">ufbinx()</a>, and <a class="el" href="ufbrms_8f.html#ab681330b8a45f02eeea39e5dc9c2f413">ufbrms()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_30c37837910170b6dae887e9df3b66a9.html">nceplibs-bufr</a></li><li class="navelem"><a class="el" href="dir_e81fc8df062d10d5f2b231f7e4ab81b8.html">src</a></li><li class="navelem"><a class="el" href="ufbint_8f.html">ufbint.f</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
